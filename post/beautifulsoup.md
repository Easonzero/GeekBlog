不久之前，本人接下了网络中心的一个项目，负责某网站爬虫的解析部分。一开始我选择直接用正则撸一份。Demo很快就出来了，一切很顺利。但是正式解析的时候，随着爬取字段的增加，事情就变得复杂了起来。由于该网站的结构就像是螺旋上升的高塔，层层嵌套，父层子层的结构又高度一致，通过正则划分网页结构变得困难，工作进程陷入了僵局。

万般无奈之下，我尝试了beautiful soup这套框架，使用的过程中略有一些心得，在此作以记录。

##beautiful soup简介
官方解释如下：

    Beautiful Soup提供一些简单的、python式的函数用来处理导航、搜索、修改分析树等功能。它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。

    Beautiful Soup自动将输入文档转换为Unicode编码，输出文档转换为utf-8编码。你不需要考虑编码方式，除非文档没有指定一个编码方式，这时，Beautiful Soup就不能自动识别编码方式了。然后，你仅仅需要说明一下原始编码方式就可以了。

    Beautiful Soup已成为和lxml、html6lib一样出色的python解释器，为用户灵活地提供不同的解析策略或强劲的速度。

那其实，我是完全把它当作一个解析Html文本的一套工具API来用的。

##优点

首先嘛，Beautiful soup最大的优点当然就是能够解决我的问题啦。

Beautiful soup相对于繁琐的正则，能够简明地寻找到html的任意一个标签。怎么一个简明法呢？Beautiful soup可以通过类似css选择器的语法锁定一个标签，也可以通过正则去锁定一个标签，还可以遍历文档树去寻找到特定的标签。这么多种寻找方法，而且基本就是套一些简单css或者正则的语法，锁定标签真的是不要太简单

其次，Beautiful soup提出标签内容、属性、类型，有一整套的api可以简明地解决这个问题。而如果用正则的话，不得不说那一长串匹配字符串看着有点心累。

##缺点

其实Beautiful soup和正则两种方式解析html是两种完全不同的思路。

Beautiful soup非常强调标签之间的结构，而正则却完全是直接了当的作风。

Beautiful soup尽管在锁定标签方面非常有优势，但是在提取内容的时候却要以来层级结构去锁定目标，不得不说不如正则来的直接。

另外一点，由于Beautiful soup对生产内容的处理有自己的一套包装，所得内容结果，比如标签，事实上并非字符串，在提取信息处理时只能按照Beautiful soup的方法按部就班的来操作，而不能结合正则来提取信息。

最后一点Beattiful soup的属性等内容提取后也不是字符串，浏览教程时也没有发现转化方法，感觉很蛋疼啊。